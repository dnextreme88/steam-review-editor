window.addEventListener("load",(function e(){if(!window.jQuery||!window.Quill)return setTimeout(e,50);let t=Quill.import("blots/embed"),l=Quill.import("blots/block/embed");class n extends t{static create(e){let t=super.create(e);return t.innerHTML=e,t}}n.blotName="span",n.className="spoiler",n.tagName="span";Quill.register({"formats/spoiler":n,"formats/divider":class extends l{static blotName="divider";static tagName="hr"}});let o=Quill.import("delta"),r=new Quill("#editor",{modules:{toolbar:{container:"#toolbar",handlers:{spoiler:function(){let e=document.createElement("span"),t=r.getSelection();t&&r.insertEmbed(t.index,"span",e)},divider:function(){const e=r.getSelection(!0);r.insertText(e.index,"",Quill.sources.USER),r.insertEmbed(e.index,"divider",!0,Quill.sources.USER),r.setSelection(e.index+1,Quill.sources.SILENT)}}}},placeholder:"Write your review here!",theme:"snow"}),i=r.container.firstChild.innerHTML;$('[data-toggle="tooltip"]').tooltip();let a=new o;function c(e){let t=e.replace(/<p>/g,"").replace(/<\/p>/g,"\n").replace(/<strong>/g,"[b]").replace(/<\/strong>/g,"[/b]").replace(/<hr>/g,"[hr][/hr]\n").replace(/<h1>/g,"[h1]").replace(/<\/h1>/g,"[/h1]\n").replace(/<h2>/g,"[h2]").replace(/<\/h2>/g,"[/h2]\n").replace(/<h3>/g,"[h3]").replace(/<\/h3>/g,"[/h3]\n").replace(/<em>/g,"[i]").replace(/<\/em>/g,"[/i]").replace(/<u>/g,"[u]").replace(/<\/u>/g,"[/u]").replace(/<ol>/g,"").replace(/<\/ol>/g,"").replace(/((<li data-list="ordered">)(.*?)(<\/li>))+/g,"[olist]\n$&[/olist]").replace(/((<li data-list="bullet">)(.*?)(<\/li>))+/g,"[list]\n$&[/list]").replace(/<li (.*?)>/g,"\t[*]").replace(/<\/li>/g,"\n").replace(/<br>/g,"\n").replace(/<a href="/g,"[url=").replace(/" target="_blank">/g,"]").replace(/<\/a>/g,"[/url]").replace(/<s>/g,"[strike]").replace(/<\/s>/g,"[/strike]").replace(/<blockquote>/g,"[quote=author]").replace(/<\/blockquote>/g,"[/quote]\n").replace(/(<span class="ql-ui")(.*?)(<\/span>)/g,"").replace(/<span class="spoiler">/g,"[spoiler]").replace(/<\/span>/g,"[/spoiler]").replace(/<pre spellcheck="false">/g,"[code]").replace(/<\/pre>/g,"[/code]\n").replace(/<code>/g,"[noparse]").replace(/<\/code>/g,"[/noparse]"),l=r.getSemanticHTML().replaceAll("<blockquote>",'<blockquote><div class="font-italic quote-author">Originally posted by <b>author</b>:</div>');$("#markup").html(t),$("#preview").html(l)}function s(){let e=$(window).height(),t=$("#footer").height(),l=$("#footer").position().top+t;l<e&&$("#footer").css("margin-top",e-l+10+"px")}r.on("selection-change",(function(e,t,l){i=r.container.firstChild.innerHTML,c(i),e?$("#editorWindow").addClass("active"):$("#editorWindow").removeClass("active")})),r.on("text-change",(function(e,t,l){i=r.container.firstChild.innerHTML,c(i),a=a.compose(e)})),$("#previewCollapse").on("show.bs.collapse",(function(){r.blur(),document.getElementById("showBtn").innerHTML="Hide Preview"})),$("#previewCollapse").on("hide.bs.collapse",(function(){document.getElementById("showBtn").innerHTML="Show Preview",r.focus()})),$("#copyBtn").click((function(){!function(e){let t=document.createElement("textarea");t.id="t",t.style.height=0,document.body.appendChild(t),t.value=document.getElementById(e).innerText;let l=document.querySelector("#t");l.select(),l.setSelectionRange(0,99999),navigator.clipboard.writeText(l.value),document.body.removeChild(t),alert("Markup copied to clipboard!")}("markup")})),$("#closeBtn").click((function(){$("#help").fadeOut(1e3,(function(){s()}))})),setInterval((function(){a.length()>0&&(a=new o)}),5e3),window.onbeforeunload=function(){if(a.length()>0)return"There are unsaved changes. Are you sure you want to leave?"},$(document).ready((function(){s();let e=$(".fade");e.css({opacity:"0"}),e.fadeTo(500,1,"swing");let t=new Date,l=t.getDate(),n=t.toLocaleString("en-us",{month:"long"});$(".current-date").html(`${l} ${n}`)}))}),!1);